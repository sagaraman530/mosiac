<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Photo Mosaic</title>
    <style>
         #mosaicCanvas {
            border: 1px solid black;
            width: 400px;
            height: 400px;
            overflow: hidden;
            position: relative;
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #controls {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="mosaicCanvas">
      <div id="canvas"></div>
        <!-- <canvas id="canvas" width="5000" height="5000"></canvas> -->
    </div>
    <div id="controls">
      <button id="zoomIn">Zoom In</button>
      <button id="zoomOut">Zoom Out</button>
  </div>
  <div id="drag-controls">
    <button id="dragUp">Up</button>
    <button id="dragLeft">Left</button>
    <button id="dragRight">Right</button>
    <button id="dragDown">Down</button>
</div>
    <!-- <script src="mosaic.js"></script> -->
</body>
<script>

const mosaicContainer = document.getElementById('mosaicCanvas');
const canvas = document.getElementById('canvas');
const zoomInButton = document.getElementById('zoomIn');
const zoomOutButton = document.getElementById('zoomOut');
const dragUpButton = document.getElementById('dragUp');
const dragLeftButton = document.getElementById('dragLeft');
const dragRightButton = document.getElementById('dragRight');
const dragDownButton = document.getElementById('dragDown');
//const context = canvas.getContext('2d');
const gridSize = 50;
  const originalImageSize = 20;
  let imageSize = originalImageSize;
  const totalImages = gridSize * gridSize;
let scale = 1;
let offsetX = 0;
let offsetY = 0;
let isDragging = false;
let startX, startY;
let images = [];

const imageData = [];
for (let i = 0; i < totalImages; i++) {
    imageData.push({
        x: (i % gridSize) + 1,
        y: Math.floor(i / gridSize) + 1,
        url: `https://picsum.photos/id/${i % 1000}/20/20`
    });
}



// function drawImages() {
//     context.clearRect(0, 0, canvas.width, canvas.height);
//     imageData.forEach(image => {
//         const img = new Image();
//         img.src = image.url;
//         img.onload = () => {
//             context.drawImage(img, image.x * 10 * scale + offsetX, image.y * 10 * scale + offsetY, 10 * scale, 10 * scale);
//         };
//     });
// }
function renderImages() {
    canvas.innerHTML = '';  // Clear existing images
    imageData.forEach(image => {
        const img = document.createElement('img');
        img.src = image.url;
        img.style.position = 'absolute';
        img.style.width = '10px';
        img.style.height = '10px';
        img.style.left = `${image.x * 10}px`;
        img.style.top = `${image.y * 10}px`;
        canvas.appendChild(img);
    });
    updateTransform();
}

function updateTransform() {
    canvas.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
    canvas.style.transformOrigin = 'top left';
    // canvas.childNodes.forEach(img => {
    //     img.style.transform = `scale(${scale})`;
    // });
}


function zoom(event) {
    event.preventDefault();
    const delta = event.deltaY > 0 ? -0.1 : 0.1;
    scale += delta;
    scale = Math.max(0.1, Math.min(5, scale));
    updateTransform();
}
function zoomIn() {
    scale += 1;
    scale = Math.min(5, scale);
    updateTransform();
}

function zoomOut() {
    scale -= 1;
    scale = Math.max(0.1, scale);
    updateTransform();
}
function dragStart(event) {
    isDragging = true;
    startX = event.clientX - offsetX;
    startY = event.clientY - offsetY;
    mosaicContainer.style.cursor = 'grabbing';
}

function dragEnd() {
    isDragging = false;
    mosaicContainer.style.cursor = 'default';
}

function drag(event) {
    if (isDragging) {
        offsetX = event.clientX - startX;
        offsetY = event.clientY - startY;
        updateTransform();
    }
}
function dragCanvas(dx, dy) {
    offsetX += dx;
    offsetY += dy;
    updateTransform();
}

mosaicContainer.addEventListener('wheel', zoom);
mosaicContainer.addEventListener('mousedown', dragStart);
mosaicContainer.addEventListener('mouseup', dragEnd);
mosaicContainer.addEventListener('mousemove', drag);
zoomInButton.addEventListener('click', zoomIn);
zoomOutButton.addEventListener('click', zoomOut);
dragUpButton.addEventListener('click', () => dragCanvas(0, 10));
dragLeftButton.addEventListener('click', () => dragCanvas(10, 0));
dragRightButton.addEventListener('click', () => dragCanvas(-10, 0));
dragDownButton.addEventListener('click', () => dragCanvas(0, -10));


renderImages();

</script>
</html>
